# Ticketing Application Environment Variables
#
# Copy this file to `.env` and update the values for your environment.
#
# For local development:
#   cp .env.example .env
#
# For production:
#   - Generate secure random values for all secrets
#   - Use environment-specific database URLs
#   - Enable proper logging levels

# =============================================================================
# Database Configuration
# =============================================================================

# Event Store (Write Side - Event Sourcing)
DATABASE_URL=postgresql://postgres:postgres@localhost:5436/ticketing_events

# Projection Store (Read Side - CQRS Projections)
PROJECTION_DATABASE_URL=postgresql://postgres:postgres@localhost:5433/ticketing_projections

# Auth Store (User Sessions, OAuth tokens)
AUTH_DATABASE_URL=postgresql://postgres:postgres@localhost:5435/ticketing_auth

# =============================================================================
# Redis Configuration
# =============================================================================

# Redis URL for sessions and rate limiting
REDIS_URL=redis://localhost:6379

# =============================================================================
# Event Bus Configuration (Redpanda/Kafka)
# =============================================================================

# Redpanda broker addresses (comma-separated for multiple brokers)
REDPANDA_BROKERS=localhost:9092

# =============================================================================
# Authentication & Authorization
# =============================================================================

# Base URL for the application (used in auth redirects, magic links)
AUTH_BASE_URL=http://localhost:8080

# JWT Secret (MUST be at least 32 characters for HS256)
# PRODUCTION: Generate with: openssl rand -base64 32
AUTH_JWT_SECRET=dev-secret-change-in-production-MUST-BE-32-CHARS-MIN

# Session duration in hours (default: 24)
AUTH_SESSION_DURATION_HOURS=24

# Test token for development/testing (optional, remove in production)
# Allows bypassing auth with Bearer token for integration tests
AUTH_TEST_TOKEN=test-token-12345

# =============================================================================
# Payment Gateway (Stripe)
# =============================================================================

# Stripe API Key (get from https://dashboard.stripe.com/apikeys)
# Use test keys (sk_test_...) for development
# Use live keys (sk_live_...) for production
STRIPE_API_KEY=sk_test_YOUR_STRIPE_API_KEY_HERE

# Stripe Webhook Secret (for webhook signature verification)
# Get from Stripe Dashboard → Developers → Webhooks
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET_HERE

# =============================================================================
# Logging & Observability
# =============================================================================

# Rust log level (comma-separated targets)
# Options: error, warn, info, debug, trace
# Example: RUST_LOG=info,ticketing=debug,composable_rust_runtime=debug
RUST_LOG=info,ticketing=debug

# Enable backtraces on errors (0 or 1)
RUST_BACKTRACE=0

# =============================================================================
# Server Configuration
# =============================================================================

# HTTP server bind address
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# Metrics endpoint bind address (Prometheus)
METRICS_HOST=0.0.0.0
METRICS_PORT=9090
